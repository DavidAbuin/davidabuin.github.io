<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dr. Xuesu Xiao's Lab Universe </title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0f17; --panel:#0f172a; --ink:#e5e7eb; --muted:#9aa4b2;
    --ring: rgba(96,165,250,.35); --rule: rgba(148,163,184,.22);
    --accent:#ef4444; 
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto}
  a{color:#ef4444;text-decoration:none} a:hover{text-decoration:underline}

  header{position:sticky;top:0;z-index:10;
    backdrop-filter:saturate(140%) blur(6px);
    background:linear-gradient(180deg,rgba(11,15,23,.85),rgba(11,15,23,.55));
    border-bottom:1px solid var(--rule);
  }
  .nav{max-width:1100px;margin:0 auto;display:flex;gap:10px;align-items:center;padding:12px 16px}
  .brand{font-weight:700}
  .pill{padding:8px 12px;border-radius:999px;background:#0c1220;border:1px solid var(--rule);color:#cbd5e1}
  .spacer{flex:1}

  .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
  h1{font-size:1.6rem;margin:0 0 8px}
  .muted{color:var(--muted)}
  .card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid var(--rule);border-radius:16px}

  /* Universe canvas */
  .universe{position:relative;height:640px;border-radius:16px;overflow:hidden}
  #sky{position:absolute;inset:0;
    background:
      radial-gradient(900px 600px at 20% 10%, rgba(239,68,68,.18), rgba(239,68,68,0) 60%),
      radial-gradient(700px 520px at 85% 120%, rgba(96,165,250,.14), rgba(96,165,250,0) 60%);
  }
  .stars{position:absolute;inset:0;opacity:.5;
    background-image:
      radial-gradient(1px 1px at 20% 40%, #93c5fd 50%, transparent 51%),
      radial-gradient(1px 1px at 60% 20%, #c084fc 50%, transparent 51%),
      radial-gradient(1px 1px at 80% 80%, #fda4af 50%, transparent 51%),
      radial-gradient(1px 1px at 35% 75%, #bae6fd 50%, transparent 51%);
  }

  .controls{position:absolute;left:16px;top:16px;display:flex;flex-wrap:wrap;gap:8px;z-index:5}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:#0c1220;border:1px solid var(--rule);cursor:pointer;user-select:none}
  .chip input{all:unset;width:14px;height:14px;border-radius:3px;border:1px solid var(--rule);display:inline-block}
  .chip.active{outline:2px solid var(--ring)}

  /* Stage (for pan, zoom, rotate) */
  #stage {
  position:absolute;
  inset:0;
  transform-origin: 50% 50%;
  will-change: transform;
  }
  
  /* Planets */
  .node{position:absolute;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:8px}
  .planet{width:88px;height:88px;border-radius:50%;
    background:linear-gradient(135deg, rgba(239,68,68,.25), rgba(96,165,250,.25));
    border:2px solid var(--rule); box-shadow:0 0 0 4px rgba(239,68,68,.09), 0 6px 20px rgba(0,0,0,.5);
    display:grid;place-items:center;cursor:pointer;transition:transform .15s ease;
  }
  .planet img{width:78px;height:78px;border-radius:50%;object-fit:cover}
  .node:hover .planet{transform:scale(1.06)}
  .label{font-size:.85rem;color:#d1d5db;text-align:center;max-width:180px}

  /* Links */
  svg.links{position:absolute;inset:0;pointer-events:none}
  .link{stroke:rgba(148,163,184,.35);stroke-width:1.5}

  /* Modal */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:40}
  .modal.open{display:flex}
  .sheet{max-width:800px;width:min(92%,800px);background:var(--panel);border:1px solid var(--rule);border-radius:18px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.6)}
  .sheet-header{display:flex;gap:16px;align-items:center;padding:16px;border-bottom:1px solid var(--rule)}
  .sheet-header img{width:64px;height:64px;border-radius:12px;object-fit:cover}
  .sheet-body{padding:16px;color:#cbd5e1}
  .close{margin-left:auto;background:#0b1220;border:1px solid var(--rule);color:#e5e7eb;padding:8px 10px;border-radius:10px;cursor:pointer}
  .tag{display:inline-block;margin:6px 6px 0 0;padding:4px 8px;border-radius:999px;background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.35);font-size:.78rem}

  .hero{padding:16px}
</style>
</head>
<body>
<header>
  <div class="nav">
    <div class="brand">Lab Universe</div>
    <a class="pill" href="index.html">← Back to Home</a>
    <span class="spacer"></span>
    <a class="pill" href="#about">About</a>
  </div>
</header>

<div class="wrap">
  <div class="card hero">
    <h1>Research Universe</h1>
    <div class="muted">Click a planet to view details. Use the chips to filter by role/topic. </div>
  </div>

  <div class="card universe" id="universe">
    <div id="sky"></div>
    <div class="stars"></div>

    <!-- Controls (add to your existing .controls div or keep separate) -->
    <div class="controls" id="controls">
    <!-- your filter chips are already added here via JS -->
    <button class="chip" id="zoom-in">＋</button>
    <button class="chip" id="zoom-out">－</button>
    <button class="chip" id="rot-left">⟲</button>
    <button class="chip" id="rot-right">⟳</button>
    <button class="chip" id="reset">Reset</button>
  </div>
     <!-- Stage (everything that moves together) -->
  <div id="stage">
    <svg class="links" viewBox="0 0 1200 640" preserveAspectRatio="none"></svg>
    <!-- nodes injected by JS -->
  </div>
</div>

<!-- Modal -->
<div class="modal" id="modal" aria-hidden="true" role="dialog">
  <div class="sheet">
    <div class="sheet-header">
      <img id="m-thumb" alt="">
      <div>
        <div id="m-title" style="font-weight:700"></div>
        <div id="m-sub" class="muted" style="font-size:.9rem"></div>
      </div>
      <button class="close" id="m-close">Close</button>
    </div>
    <div class="sheet-body">
      <div id="m-desc"></div>
      <div id="m-tags" style="margin-top:6px"></div>
      <div id="m-links" style="margin-top:10px"></div>
    </div>
  </div>
</div>

<script>
/* ====== DATA: Edit this with your lab members ======
   Put images into assets/lab/ and reference them here.
   Coordinates are a 1200x640 design space (x:0-1200, y:0-640).
*/
const wrap = document.getElementById('universe');
const stage = document.getElementById('stage');
const linkSvg = stage.querySelector('svg.links');
const controls = document.getElementById('controls');
  
const data = {
  filters: [
    { id:'pi', label:'PI' },
    { id:'postdoc', label:'Postdoc' },
    { id:'phd', label:'PhD' },
    { id:'ms', label:'MS' },
    { id:'alum', label:'Alumni' }
  ],

  nodes: [
    {
      id:'xuesu-xiao',
      title:'Xuesu Xiao',
      sub:'PI — Robotics',
      img:'assets/lab/xiao.jpg',
      topics:['pi'],
      x:210, y:200,
      desc:`Principal Investigator. Dr. Xuesu Xiao is an Assistant Professor of Computer Science at George Mason University.
            His research focuses on developing highly capable and intelligent mobile robots that are robustly deployable
            in the real world with minimal human supervision.`,
      links:[{label:'Lab Page', href:'https://robotixx.cs.gmu.edu/'}]
    },

    {
      id:'daeun-song',
      title:'Daeun Song',
      sub:'Postdoctoral Researcher — HRI',
      img:'assets/lab/song.jpg',
      topics:['postdoc'],
      x:460, y:320,
      desc:`Dr. Daeun Song is a Postdoctoral Researcher in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Website', href:'https://daeunsong.github.io/'},
        {label:'GitHub',  href:'https://github.com/daeunsong'}
      ]
    },

    {
      id:'sameep-shrestha',
      title:'Sameep Shrestha',
      sub:'PhD Student — Robotics',
      img:'assets/lab/sameep.jpg',
      topics:['phd'],
      x:540, y:280,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[{label:'Webpage', href:'https://sameepshrestha.github.io/'}]
    },

    {
      id:'nhat-le',
      title:'Nhat Le',
      sub:'PhD Student — Robotics',
      img:'assets/lab/nhat.jpeg',
      topics:['phd'],
      x:640, y:340,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'GitHub',   href:'https://github.com/nhatleminh1997'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/nhat-le-026392149/'}
      ]
    },

    {
      id:'harsh-rangwala',
      title:'Harsh Rangwala',
      sub:'PhD Student — Robotics',
      img:'assets/lab/harsh.jpg',
      topics:['phd'],
      x:740, y:300,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'LinkedIn', href:'https://www.linkedin.com/in/harsh-rangwala-020a66164/'},
        {label:'GitHub',   href:'https://github.com/HarshRangwala'}
      ]
    },

    {
      id:'sohail-shaikh',
      title:'Sohail Shaikh',
      sub:'PhD Student — Robotics',
      img:'assets/lab/sohail.png',
      topics:['phd'],
      x:860, y:260,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'LinkedIn', href:'https://www.linkedin.com/in/sohailshaikh/'}
      ]
    },

    {
      id:'manas-gupta',
      title:'Manas Gupta',
      sub:'PhD Student — Robotics',
      img:'assets/lab/manas.jpg',
      topics:['phd'],
      x:900, y:360,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'LinkedIn', href:'https://www.linkedin.com/in/manasguptangp/'}
      ]
    },

    {
      id:'senthurbavan-kirubaharan',
      title:'Senthurbavan Kirubaharan',
      sub:'PhD Student — Robotics',
      img:'assets/lab/senthu.jpg',
      topics:['phd'],
      x:1020, y:300,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage',  href:'https://senthurbavan.github.io/'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/senthurbavan/'}
      ]
    },

    {
      id:'yanlin-zhou',
      title:'Yanlin Zhou',
      sub:'PhD Student — Robotics',
      img:'assets/lab/yanlin.jpg',
      topics:['phd'],
      x:980, y:420,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'GitHub', href:'https://github.com/Zed2135'}
      ]
    },

    {
      id:'linji-wang',
      title:'Linji Wang',
      sub:'PhD Student — Robotics',
      img:'assets/lab/linji.jpg',
      topics:['phd'],
      x:820, y:420,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage',  href:'https://linjiwang.com/'},
        {label:'GitHub',   href:'https://github.com/linjiw'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/linjiw/'}
      ]
    },

    {
      id:'tong-xu',
      title:'Tong Xu',
      sub:'PhD Student — Robotics',
      img:'assets/lab/tong.jpg',
      topics:['phd'],
      x:700, y:420,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage',  href:'https://xutong05.github.io/'},
        {label:'GitHub',   href:'https://github.com/xutong05'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/tong-xu-a802941b1/'}
      ]
    },

    {
      id:'saad-abdul-ghani',
      title:'Saad Abdul Ghani',
      sub:'PhD Student — Robotics',
      img:'assets/lab/saad.jpeg',
      topics:['phd'],
      x:600, y:460,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'GitHub',   href:'https://github.com/Saadmaghani'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/saad-ghani-9b5824158/'}
      ]
    },

    {
      id:'amir-payandeh',
      title:'Amir Payandeh',
      sub:'PhD Student — Robotics',
      img:'assets/lab/amirreza.jpg',
      topics:['phd'],
      x:500, y:460,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'GitHub',   href:'https://github.com/Amir-pyh'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/amir-payandeh/'}
      ]
    },

    {
      id:'mohammad-nazeri',
      title:'Mohammad Nazeri',
      sub:'PhD Student — Robotics',
      img:'assets/lab/mohammad.jpg',
      topics:['phd'],
      x:400, y:460,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage',  href:'https://mhnazeri.github.io/'},
        {label:'GitHub',   href:'https://github.com/mhnazeri'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/mhnazeri/'}
      ]
    },

    {
      id:'dibyendu-das',
      title:'Dibyendu Das',
      sub:'PhD Student — Robotics',
      img:'assets/lab/dibyendu.jpg',
      topics:['phd'],
      x:320, y:420,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'LinkedIn', href:'https://www.linkedin.com/in/dibyendu-das-b480481bb/'}
      ]
    },

    {
      id:'aniket-datar',
      title:'Aniket Datar',
      sub:'PhD Student — Robotics',
      img:'assets/lab/aniket.jpg',
      topics:['phd'],
      x:260, y:340,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'LinkedIn', href:'https://www.linkedin.com/in/aniket-datar-9187a48b/'}
      ]
    },

    {
      id:'manshi-limbu',
      title:'Manshi Limbu',
      sub:'PhD Student — Robotics',
      img:'assets/lab/manshi.jpg',
      topics:['phd'],
      x:300, y:280,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage', href:'https://mlimbuu.github.io/'},
        {label:'GitHub',  href:'https://github.com/mlimbuu'}
      ]
    },

    {
      id:'anuj-pokhrel',
      title:'Anuj Pokhrel',
      sub:'PhD Student — Robotics',
      img:'assets/lab/anuj.jpg',
      topics:['phd'],
      x:360, y:220,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage',  href:'https://anujpokhrel.github.io/'},
        {label:'GitHub',   href:'https://github.com/AnujPokhrel'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/anuj-pokhrel-9b8b67156/'}
      ]
    },

    {
      id:'amir-hossain-raj',
      title:'Amir Hossain Raj',
      sub:'PhD Student — Robotics',
      img:'assets/lab/amir.jpeg',
      topics:['phd'],
      x:440, y:200,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage',  href:'https://amirraj.com/'},
        {label:'GitHub',   href:'https://github.com/amirraj/'},
        {label:'LinkedIn', href:'https://www.linkedin.com/in/amirraj/'}
      ]
    },

    {
      id:'chenhui-pan',
      title:'Chenhui Pan',
      sub:'PhD Student — Robotics',
      img:'assets/lab/chenhui.jpg',
      topics:['phd'],
      x:520, y:180,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`
    },

    {
      id:'duc-aaron-nguyen',
      title:'Duc (Aaron) M. Nguyen',
      sub:'PhD Student — Robotics',
      img:'assets/lab/aaron.png',
      topics:['phd'],
      x:620, y:180,
      desc:`Ph.D. student in the Department of Computer Science at George Mason University.`,
      links:[
        {label:'Webpage', href:'https://ducmngx.github.io/'},
        {label:'GitHub',  href:'https://github.com/ducmngx'}
      ]
    },

    {
      id:'ms-alex',
      title:'Alex Card',
      sub:'Robotics',
      img:'assets/lab/alex.png',
      topics:['ms'],
      x:720, y:180,
      desc:`Interests include autonomous robotics, machine learning, computer vision, and motion planning.`,
      links:[
        {label:'GitHub', href:'https://github.com/acard5meg'}
      ]
    },

    {
      id:'deiching',
      title:'David Abuín Eichinger',
      sub:'Robotics',
      img:'assets/self.png',
      topics:['ms'],
      x:820, y:180,
      desc:`David Abuín Eichinger is a Master's student in the Department of Computer Science at George Mason University. He received his Post-baccalaureate Certificate in Computer Science from GMU. He also received his B.S. degrees in Microbiology from North Carolina State University and Maritime Transportation from the United States Merchant Marine Academy. He is a US Navy veteran with joint operational planning and knowledge management experience. David's interests include biomimicry and bio-inspired robotics with the aim of using robotics in various biological applications such as laboratory automation, environmental restoration, agriculture, and providing autonomous assistance for caretakers of senior citizens and those with disabilities. In his free time, he enjoys reading, playing with family, gardening, and physical fitness activities such as weightlifting, running, cycling, and hiking.`,
      links:[{label:'LinkedIn', href:'https://www.linkedin.com/in/david-abu%C3%ADn-e-b09a36267/'}]
    },
/*
    {
      id:'alum1',
      title:'Alumni C',
      sub:'Alumni',
      img:'assets/lab/alum1.jpg',
      topics:['alum'],
      x:950, y:420,
      desc:`Former member focused on multi-robot coordination.`,
      links:[{label:'LinkedIn', href:'#'}]
    } */
  ],

  // Pairs of related people (ids must match exactly)
  links: [
    ['xuesu-xiao','daeun-song'],
    ['xuesu-xiao','sameep-shrestha'],
    ['xuesu-xiao','nhat-le'],
    ['xuesu-xiao','harsh-rangwala'],
    ['xuesu-xiao','sohail-shaikh'],
    ['xuesu-xiao','manas-gupta'],
    ['xuesu-xiao','senthurbavan-kirubaharan'],
    ['xuesu-xiao','yanlin-zhou'],
    ['xuesu-xiao','linji-wang'],
    ['xuesu-xiao','tong-xu'],
    ['xuesu-xiao','saad-abdul-ghani'],
    ['xuesu-xiao','amir-payandeh'],
    ['xuesu-xiao','mohammad-nazeri'],
    ['xuesu-xiao','dibyendu-das'],
    ['xuesu-xiao','aniket-datar'],
    ['xuesu-xiao','manshi-limbu'],
    ['xuesu-xiao','anuj-pokhrel'],
    ['xuesu-xiao','amir-hossain-raj'],
    ['xuesu-xiao','chenhui-pan'],
    ['xuesu-xiao','duc-aaron-nguyen'],
    ['xuesu-xiao','ms-alex'],
    ['xuesu-xiao','deiching']
 //   ['xuesu-xiao','student2']
  ]
};

/* ====== Rendering logic (no dependencies) ====== */
const wrap = document.getElementById('universe');
const linkSvg = document.querySelector('svg.links');
const controls = document.getElementById('controls');
const active = new Set();
const nodeMap = new Map();

data.filters.forEach(f=>{
  const chip = document.createElement('label');
  chip.className = 'chip';
  chip.innerHTML = `<input type="checkbox"/> ${f.label}`;
  chip.onclick = (e)=>{
    if(e.target.tagName.toLowerCase()==='input'){
      if(e.target.checked) active.add(f.id); else active.delete(f.id);
      chip.classList.toggle('active', e.target.checked);
      renderNodes();
    }
  };
  controls.appendChild(chip);
});

function renderNodes(){
  // clear old nodes
  [...wrap.querySelectorAll('.node')].forEach(n=>n.remove());
  nodeMap.clear();

  const filtered = data.nodes.filter(n => active.size===0 || n.topics.some(t=>active.has(t)));
  filtered.forEach(n=>{
    const el = document.createElement('div');
    el.className = 'node';
    el.style.left = (n.x/1200*100)+'%';
    el.style.top  = (n.y/640*100)+'%';
    el.innerHTML = `
      <div class="planet" data-id="${n.id}"><img alt="${n.title}" src="${n.img}"></div>
      <div class="label">${n.title}</div>
    `;
    el.querySelector('.planet').addEventListener('click', ()=> openModal(n));
    wrap.appendChild(el);
    nodeMap.set(n.id, el);
  });
  drawLinks();
}
function drawLinks(){
  const W=1200,H=640; linkSvg.setAttribute('viewBox',`0 0 ${W} ${H}`);
  linkSvg.innerHTML = '';
  data.links.forEach(([a,b])=>{
    if(!nodeMap.has(a) || !nodeMap.has(b)) return;
    const A = data.nodes.find(n=>n.id===a), B = data.nodes.find(n=>n.id===b);
    const line = document.createElementNS('http://www.w3.org/2000/svg','line');
    line.classList.add('link');
    line.setAttribute('x1', A.x); line.setAttribute('y1', A.y);
    line.setAttribute('x2', B.x); line.setAttribute('y2', B.y);
    linkSvg.appendChild(line);
  });
}
const modal = document.getElementById('modal');
const mClose = document.getElementById('m-close');
function openModal(n){
  document.getElementById('m-thumb').src = n.img;
  document.getElementById('m-title').textContent = n.title;
  document.getElementById('m-sub').textContent = n.sub || '';
  document.getElementById('m-desc').textContent = n.desc || '';
  document.getElementById('m-tags').innerHTML = (n.topics||[]).map(t=>`<span class="tag">${labelFor(t)}</span>`).join('');
  document.getElementById('m-links').innerHTML = (n.links||[]).map(l=>`<a class="pill" style="margin-right:8px" href="${l.href}" target="_blank" rel="noopener">${l.label}</a>`).join('');
  modal.classList.add('open'); modal.setAttribute('aria-hidden','false');
}
mClose.onclick = ()=>{ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); };
modal.addEventListener('click', (e)=>{ if(e.target===modal) mClose.click(); });

function labelFor(id){ const f=data.filters.find(x=>x.id===id); return f?f.label:id; }
renderNodes();
window.addEventListener('resize', drawLinks);

// === Add pan / zoom / rotate logic ===
const t = { x:0, y:0, scale:1, rot:0 };
const LIMIT = { minScale: 0.4, maxScale: 3 };

function applyTransform(){
  stage.style.transform =
    `translate(${t.x}px, ${t.y}px) scale(${t.scale}) rotate(${t.rot}deg)`;
}
applyTransform();

// --- mouse drag (pan)
let dragging=false,lastX=0,lastY=0;
wrap.addEventListener('pointerdown', e=>{
  if(e.target.closest('.planet')) return;
  dragging=true; wrap.setPointerCapture(e.pointerId);
  lastX=e.clientX; lastY=e.clientY;
});
wrap.addEventListener('pointermove', e=>{
  if(!dragging) return;
  const dx=e.clientX-lastX, dy=e.clientY-lastY;
  t.x+=dx; t.y+=dy; lastX=e.clientX; lastY=e.clientY; applyTransform();
});
wrap.addEventListener('pointerup', ()=>dragging=false);
wrap.addEventListener('pointercancel',()=>dragging=false);

// --- zoom (wheel)
wrap.addEventListener('wheel', e=>{
  e.preventDefault();
  const factor=(e.deltaY>0)?0.9:1.1;
  t.scale=Math.max(LIMIT.minScale,Math.min(LIMIT.maxScale,t.scale*factor));
  applyTransform();
},{passive:false});

// --- rotate & reset buttons
document.getElementById('zoom-in').onclick=()=>{t.scale=Math.min(LIMIT.maxScale,t.scale*1.1);applyTransform();};
document.getElementById('zoom-out').onclick=()=>{t.scale=Math.max(LIMIT.minScale,t.scale*0.9);applyTransform();};
document.getElementById('rot-left').onclick=()=>{t.rot-=10;applyTransform();};
document.getElementById('rot-right').onclick=()=>{t.rot+=10;applyTransform();};
document.getElementById('reset').onclick=()=>{t.x=0;t.y=0;t.scale=1;t.rot=0;applyTransform();};

// --- optional keyboard shortcuts
window.addEventListener('keydown', e=>{
  if(e.key==='+'){t.scale=Math.min(LIMIT.maxScale,t.scale*1.1);}
  if(e.key==='-'){t.scale=Math.max(LIMIT.minScale,t.scale*0.9);}
  if(e.key==='['){t.rot-=10;}
  if(e.key===']'){t.rot+=10;}
  if(e.key==='0'){t.x=0;t.y=0;t.scale=1;t.rot=0;}
  if(e.key==='ArrowLeft')t.x+=20;
  if(e.key==='ArrowRight')t.x-=20;
  if(e.key==='ArrowUp')t.y+=20;
  if(e.key==='ArrowDown')t.y-=20;
  applyTransform();
});

  
</script>
</body>
</html>
